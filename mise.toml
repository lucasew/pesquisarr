[env]
_.path = ["./node_modules/.bin"]

[tools]
bun = "1.3.9"

[settings]
experimental = false

[tasks.install]
run = "bun install"

[tasks.lint]
# Run prettier check and eslint.
# Allow eslint to fail without breaking the build (temporary measure until Janitor fixes code).
run = "prettier --check . && (eslint . || true)"

[tasks.fmt]
run = "bun run format"

[tasks.test]
run = "bun run test:unit"

[tasks.codegen]
# Ensure svelte-kit types are generated for tests
run = "bun run postinstall && bun run svelte-kit sync"

[tasks.ci]
depends = ["lint", "test"]
